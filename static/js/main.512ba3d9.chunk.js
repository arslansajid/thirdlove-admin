(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a(63)},26:function(e,t,a){},39:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(10),i=a.n(o),s=(a(24),a(25),a(26),a(11)),r=a(12),c=a(13),m=a(17),u=a(14),d=a(18),f=a(4),h=a.n(f),g={apiKey:"AIzaSyBwhYTeN1U33SYw8cHDjAmWgR0x9XGwn5k",authDomain:"thirdlove-beabd.firebaseapp.com",databaseURL:"https://thirdlove-beabd.firebaseio.com",storageBucket:"thirdlove-beabd.appspot.com"},v=(a(39),a(5)),p=a.n(v),b=a(16),E=a.n(b),w=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).getImagesData=function(){console.log("fn called");var e=[];h.a.storage().ref("/images").listAll().then(function(t){t.items.forEach(function(t){t.getDownloadURL().then(function(t){e.push(t)}).catch(function(e){console.log("Error fetching image URL")})})}).catch(function(e){}),a.setState({images:e})},a.writeUserData=function(){h.a.database().ref("/items").set(a.state.items),console.log("DATA SAVED")},a.getUserData=function(){h.a.database().ref("/").on("value",function(e){var t=e.val();a.setState({items:t.items,loading:!1},function(){a.getImagesData()})})},a.handleSubmit=function(e){e.preventDefault();var t=h.a.storage().ref(),n=a.state.image;n&&t.child("images/".concat(n.name)).put(n).on("state_changed",function(e){},function(e){console.log(e)},function(){console.log("success")});var l=a.state.name,o=a.state.role,i=a.refs.uid.value;if(i&&l&&o){var s=a.state.items,r=s.findIndex(function(e){return e.uid===i});s[r].name=l,s[r].role=o,s[r].image=n,a.setState({items:s}),p.a.fire("Item Updated!","Item updated successfully!","success")}else if(l&&o){var c=(new Date).getTime().toString(),m=a.state.items;m.push({uid:c,name:l,role:o}),a.setState({items:m}),p.a.fire("Item Added!","Item added successfully!","success")}a.setState({name:"",role:"",image:null})},a.removeData=function(e){var t=a.state.items;p.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(n){if(n.value){var l=t.filter(function(t){return t.uid!==e.uid});a.setState({items:l}),p.a.fire("Deleted!","Your file has been deleted.","success")}})},a.updateData=function(e){a.refs.uid.value=e.uid,a.setState({name:e.name,role:e.role})},a.handleInputChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(s.a)({},n,l))},a.handleImageFile=function(e){a.setState({image:e.target.files[0]})},h.a.initializeApp(g),a.state={items:[],images:[],name:"",role:"",image:null,loading:!0},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getUserData()}},{key:"componentDidUpdate",value:function(e,t){t!==this.state&&this.writeUserData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.items,n=t.images,o=t.loading;return console.log(this.state),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row my-3 text-center"},l.a.createElement("div",{className:"col-xl-12 "},l.a.createElement("h1",null,"ThirdLove Admin Dashboard"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-xl-12"},o?l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement(E.a,{type:"RevolvingDot",color:"#007bff",height:150,width:150})):a.map(function(t){return l.a.createElement("div",{key:t.uid,className:"card float-left my-3 mr-3",style:{width:"18rem"}},l.a.createElement("div",{className:"card-body"},l.a.createElement("h5",{className:"card-title"},t.name),l.a.createElement("p",{className:"card-text"},t.role),l.a.createElement("p",{className:"card-text"},"Total Images: ",n?n.length:"No Images yet..."),l.a.createElement("button",{onClick:function(){return e.removeData(t)},className:"btn btn-danger mr-2"},"Delete"),l.a.createElement("button",{onClick:function(){return e.updateData(t)},className:"btn btn-primary mr-2"},"Edit")))}))),l.a.createElement("div",{className:"row mb-3"},l.a.createElement("div",{className:"col-xl-12"},l.a.createElement("h1",null,"Add new item here"),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("div",{className:"form-row"},l.a.createElement("input",{type:"hidden",ref:"uid"}),l.a.createElement("div",{className:"form-group col-md-6"},l.a.createElement("label",null,"Name"),l.a.createElement("input",{type:"text",name:"name",ref:"name",className:"form-control",placeholder:"Name",value:this.state.name,onChange:this.handleInputChange})),l.a.createElement("div",{className:"form-group col-md-6"},l.a.createElement("label",null,"Role"),l.a.createElement("input",{type:"text",name:"role",ref:"role",className:"form-control",placeholder:"Role",value:this.state.role,onChange:this.handleInputChange})),l.a.createElement("div",{className:"form-group col-md-6"},l.a.createElement("label",null,"Image"),l.a.createElement("input",{type:"file",className:"form-control file-select",accept:"image/*",onChange:this.handleImageFile}))),l.a.createElement("div",{className:""},l.a.createElement("button",{type:"submit",className:"btn btn-lg btn-success"},"Save"))))))}}]),t}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[19,1,2]]]);
//# sourceMappingURL=main.512ba3d9.chunk.js.map